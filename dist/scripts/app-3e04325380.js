!function(){"use strict";angular.module("locationDataUi",["ngAria","ui.router","ui-leaflet"])}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("locationDataUi").directive("locationNavbar",e)}(),function(){"use strict";function e(e,t,n){function l(e,t){for(var n,l=/\w+(?:'\w{1,2})?/g,a={};null!=(n=l.exec(e));){var r=n[0].toLowerCase();"undefined"==typeof a[r]?a[r]=1:a[r]++}var o=[];for(var r in a)a.hasOwnProperty(r)&&o.push([r,a[r]]);o.sort(function(e,t){return t[1]-e[1]});for(var d=[],i=0;t>i;i++)d.push(o[i][0]);return d}function a(e,t){for(var n,l=/\w+(?:'\w{1,2})?/g,a={};null!=(n=l.exec(e));){var r=n[0].toLowerCase();"undefined"==typeof a[r]?a[r]=1:a[r]++}var o=[];for(var r in a)a.hasOwnProperty(r)&&o.push([r,a[r]]);o.sort(function(e,t){return t[1]-e[1]});for(var d=[],i=0;t>i;i++)d.push(o[i][1]);return d}function r(e){return Date.parse(e)/1e3}var o=new L.FeatureGroup;angular.extend(e,{map:{tweets:{lat:41.0814,lng:-81.519,zoom:12},drawOptions:{position:"topleft",draw:{polyline:{metric:!1},polygon:{metric:!1,showArea:!0,drawError:{color:"#b00b00",timeout:1e3},shapeOptions:{color:"blue"}},circle:{showArea:!0,metric:!1,shapeOptions:{color:"#662d91",clickable:!0}},marker:!0},edit:{featureGroup:o,remove:!0}}}});var d={created:function(e,t,d,i,s){o.addLayer(t.layer),console.log(e,t,d,i,s),"circle"===t.layerType&&n.circleQuery(t.layer._latlng.lat,t.layer._latlng.lng,t.layer._mRadius).then(function(e){console.log(e);for(var t={},n=[],o=[],i=[],s=r(document.getElementById("datefrom").value),c=r(document.getElementById("dateto").value),m=0;m<e.data.length;m++){var u=r(e.data[m].created_at);c>u&&u>s&&o.push(e.data[m])}for(var p=document.getElementById("keywordfrom1").value.toString(),y=document.getElementById("keywordfrom2").value.toString(),b=document.getElementById("keywordfrom3").value.toString(),m=0;m<e.data.length;m++){var f=e.data[m].keywords.toString();(p===f||y===f||b===f)&&i.push(e.data[m])}if(""!==document.getElementById("keywordfrom1").value||""!==document.getElementById("keywordfrom2").value||""!==document.getElementById("keywordfrom3").value){for(var m=i.length-1;m>=0;m--){var v=L.icon({iconUrl:"/images/points.png",iconSize:[10,10],iconAnchor:[10,10]}),g=new L.marker([i[m].loc.coordinates[1],i[m].loc.coordinates[0]],{icon:v}),w=L.layerGroup([g]);w.addTo(d),n.push(i[m].keywords.toString()),t+=" "+i[m].keywords.toString()}if(n.length>=10)for(var h=l(t,10),_=a(t,10),m=0;m<=h.length-1;m++){var k="keywords"+m;k=document.getElementById(k.toString()).innerHTML=h[m];var k="frenquency"+m;k=document.getElementById(k.toString()).innerHTML=_[m]}else for(var m=0;m<=n.length-1;m++){var k="keywords"+m;k=document.getElementById(k.toString()).innerHTML=n[m]}}else if(""===document.getElementById("datefrom").value||""===document.getElementById("dateto").value){for(var x=L.markerClusterGroup(),w=L.layerGroup(),m=e.data.length-1;m>=0;m--){var v=L.icon({iconUrl:"/images/points.png",iconSize:[10,10],iconAnchor:[10,10]}),g=L.marker([e.data[m].loc.coordinates[1],e.data[m].loc.coordinates[0]],{icon:v});x.addLayer(g),w.addLayer(g),n.push(e.data[m].keywords.toString()),t+=" "+e.data[m].keywords.toString()}if(e.data.length>500?d.addLayer(x):d.addLayer(w),n.length>=10)for(var h=l(t,10),_=a(t,10),m=0;m<=h.length-1;m++){var k="keywords"+m;k=document.getElementById(k.toString()).innerHTML=h[m];var k="frenquency"+m;k=document.getElementById(k.toString()).innerHTML=_[m]}else for(var m=0;m<=n.length-1;m++){var k="keywords"+m;k=document.getElementById(k.toString()).innerHTML=n[m]}}else{for(var x=L.markerClusterGroup(),w=L.layerGroup(),m=o.length-1;m>=0;m--){var v=L.icon({iconUrl:"/images/points.png",iconSize:[10,10],iconAnchor:[10,10]}),g=new L.marker([o[m].loc.coordinates[1],o[m].loc.coordinates[0]],{icon:v});x.addLayer(g),w.addLayer(g),n.push(o[m].keywords.toString()),t+=" "+o[m].keywords.toString()}if(o.length>500?d.addLayer(x):d.addLayer(w),n.length>=10)for(var h=l(t,10),_=a(t,10),m=0;m<=h.length-1;m++){var k="keywords"+m;k=document.getElementById(k.toString()).innerHTML=h[m];var k="frenquency"+m;k=document.getElementById(k.toString()).innerHTML=_[m]}else for(var m=0;m<=n.length-1;m++){var k="keywords"+m;k=document.getElementById(k.toString()).innerHTML=n[m]}}})},edited:function(e){},deleted:function(e){var t;t=e.layers,o.removeLayer(layer)},drawstart:function(e){},drawstop:function(e){},editstart:function(e){},editstop:function(e){},deletestart:function(e){},deletestop:function(e){}},i=t.getAvailableEvents();i.forEach(function(t){e.$on("leafletDirectiveDraw."+t,function(e,n){var l,a,r,o;l=n.leafletEvent,a=n.leafletObject,r=n.model,o=n.modelName,d[t.replace("draw:","")](e,l,a,r,o)})})}e.$inject=["$scope","leafletDrawEvents","MapQueryService"],angular.module("locationDataUi").controller("MainController",e)}(),function(){"use strict";function e(e,t){function n(n,l,a){console.log(n,l,a);var r={method:"GET",url:t.apiUrl+"/near/"+n+","+l+"/"+a};return e(r).then(function(e){return e})}return{circleQuery:n}}e.$inject=["$http","Environment"],angular.module("locationDataUi").factory("MapQueryService",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("locationDataUi").run(e)}(),function(){"use strict";function e(e,t){e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("locationDataUi").config(e)}(),function(){"use strict";function e(e){var t={environment:"stage",apiUrl:"http://127.0.0.1:3000/v1.0"};return"local"===e?t:void 0}var t="local";angular.module("locationDataUi").constant("Environment",e(t))}(),function(){"use strict";function e(e){e.debugEnabled(!0)}e.$inject=["$logProvider"],angular.module("locationDataUi").config(e)}(),angular.module("locationDataUi").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header"><header class=mdl-layout__header><location-navbar></location-navbar></header><div class=mdl-layout__drawer><span class=mdl-layout-title>Sections</span><nav class=mdl-navigation><a class=mdl-navigation__link href="">Map</a> <a class=mdl-navigation__link href="">Data Sets</a></nav></div><main class=mdl-layout__content><div class=mdl-grid><div class="mdl-cell mdl-cell--9-col graybox"><leaflet style=float:left lf-center=map.tweets lf-draw=map.drawOptions legend=map.legend height=535px width=100%></leaflet></div><div class="mdl-cell mdl-cell--3-col graybox"><table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable"><thead><tr><th class=mdl-data-table__cell--non-numeric>Keywords</th><th>Frenquency</th></tr></thead><tbody><tr><td class=mdl-data-table__cell--non-numeric id=keywords0></td><td id=frenquency0></td></tr><tr><td class=mdl-data-table__cell--non-numeric id=keywords1></td><td id=frenquency1></td></tr><tr><td class=mdl-data-table__cell--non-numeric id=keywords2></td><td id=frenquency2></td></tr><tr><td class=mdl-data-table__cell--non-numeric id=keywords3></td><td id=frenquency3></td></tr><tr><td class=mdl-data-table__cell--non-numeric id=keywords4></td><td id=frenquency4></td></tr><tr><td class=mdl-data-table__cell--non-numeric id=keywords5></td><td id=frenquency5></td></tr><tr><td class=mdl-data-table__cell--non-numeric id=keywords6></td><td id=frenquency6></td></tr><tr><td class=mdl-data-table__cell--non-numeric id=keywords7></td><td id=frenquency7></td></tr><tr><td class=mdl-data-table__cell--non-numeric id=keywords8></td><td id=frenquency8></td></tr><tr><td class=mdl-data-table__cell--non-numeric id=keywords9></td><td id=frenquency9></td></tr></tbody></table></div><div class="mdl-cell mdl-cell--3-col graybox"><table><tr><td><input id=datefrom type=text> Start (2015/10/01)</td><td><input id=dateto type=text> End (2015/10/02)</td></tr></table></div><div class="mdl-cell mdl-cell--3-col graybox"><table><tr><td><input type=number step=any ng-model=map.tweets.lat> Latitude</td><td><input type=number step=any ng-model=map.tweets.lng> Longitude</td><td><input type=number step=any ng-model=map.tweets.zoom> Zoom</td></tr></table></div><!--  <div class="mdl-cell mdl-cell--3-col graybox">\n  <table>\n      <tr>\n        <td><input style = "display: none"/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</td>\n        <td> <input class="mdl-textfield__input" id = \'datefrom\' type="text"/> StartTime </td>\n        <td><input type="number" step="any" ng-model="map.tweets.zoom" /> Zoom</td>\n      </tr>\n    </table>\n   </div> --><div class="mdl-cell mdl-cell--2-col graybox"><table><tr><td><input style="display: none">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</td></tr></table></div><div class="mdl-cell mdl-cell--1-col graybox"><form action=#><div class="mdl-textfield mdl-js-textfield"><input class=mdl-textfield__input type=text id=keywordfrom1><label class=mdl-textfield__label for=keywordfrom1>Keywords1...</label></div></form></div><div class="mdl-cell mdl-cell--1-col graybox"><form action=#><div class="mdl-textfield mdl-js-textfield"><input class=mdl-textfield__input type=text id=keywordfrom2><label class=mdl-textfield__label for=keywordfrom2>Keywords2...</label></div></form></div><div class="mdl-cell mdl-cell--1-col graybox"><form action=#><div class="mdl-textfield mdl-js-textfield"><input class=mdl-textfield__input type=text id=keywordfrom3><label class=mdl-textfield__label for=keywordfrom3>Keywords3...</label></div></form></div></div></main><!--   <footer class="mdl-mini-footer">\n    <div class="mdl-mini-footer__right-section">\n\n    </div>\n  </footer> --></div>'),e.put("app/components/navbar/navbar.html",'<div class=mdl-layout__header-row><!-- Title --> <span class=mdl-layout-title>Tweets Query</span><!-- Add spacer, to align navigation to the right --><div class=mdl-layout-spacer></div><!-- Navigation. We hide it in small screens. --> <button id=demo-menu-lower-right class="mdl-button mdl-js-button">Query</button><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for=demo-menu-lower-right><li class=mdl-menu__item>Query By Name</li><li class=mdl-menu__item>Region Query</li><li class=mdl-menu__item>Disabled Action</li><li class=mdl-menu__item>Yet Another Action</li></ul></div>')}]);
//# sourceMappingURL=../maps/scripts/app-3e04325380.js.map
